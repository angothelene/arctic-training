---
title: "Salmon - Reformat data"
author: "Hélène Angot"
date: "2/13/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Mike Byerly. Alaska commercial salmon catches by management region (1886- 1997). Gulf of Alaska Data Portal. Data dowloaded [here](https://knb.ecoinformatics.org/view/df35b.304.2)

## Abstract

These data are digitized from the Alaska Department of Fish and Game report: ALASKA COMMERCIAL SALMON CATCHES, 1878-1997. Salmon catch statistics are generated from a system of landing records called the Fish Ticket System. All salmon that are sold must be reported on a fish ticket, which will eventually end up in a large computer database going back to 1969. Data in this report from 1969 to the 1997 carne from this system. Statistics from years prior to 1969 came from previous versions of this report.

## Packages

```{r message=FALSE}
library(DT)
library(dplyr)
library(tidyr)
```

## Open data

```{r}
catch_original = read.csv("/Users/angot/Documents/Formations_Tutoriels/Arctic_Data_Center/data/byerlySalmonByRegion.csv",header=TRUE)
region  = read.csv("/Users/angot/Documents/Formations_Tutoriels/Arctic_Data_Center/data/byerlyRegionDefs.csv",header=TRUE)
```

```{r}
datatable(catch_original)
```

```{r}
datatable(region)
```

## Reformat Catch Data

* remove the "all" column
* create species column
    * move from wide to long
* general QA

Remove the "all" and "notesRegCode" columns using "select".

Cmd + shift + m: pipe operator shortcut %>% 

```{r}
catch_long = catch_original %>% 
  select(Region,Year,Sockeye,Coho,Pink,Chum,Chinook)

head(catch_long)
```

Another way of doing this:

```{r}
catch_long = catch_original %>% 
  select(-All, -notesRegCode)
```

We're now going to use function "gather"

```{r message=FALSE, warning=FALSE}
catch_long = catch_original %>% 
  select(-All, -notesRegCode) %>% #select columns we want
  gather(key = "species", value = "catch", -Region, -Year) #move from wide to long

head(catch_long)
```

If we want to move back to wide format

```{r message=FALSE, warning=FALSE}
catch_wide = catch_long %>% 
  spread(key = species, value = catch)

head(catch_wide)
```

or

```{r message=FALSE, warning=FALSE}
catch_wide = catch_long %>% 
  spread(key = Region, value = catch)

head(catch_wide)
```

## Join the Region Definitions

## Misc. Functions



